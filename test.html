<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JSON Formatter</title>
  <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
          rel="stylesheet"
  >
  <style>
    body {
      background-color: #f8f9fa;
    }
    .container {
      margin-top: 20px;
    }
    .card {
      margin-bottom: 10px;
      border-radius: 12px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
    .json-key {
      font-weight: bold;
      color: #0d6efd;
    }
    .json-value {
      color: #212529;
    }
    .json-array, .json-object {
      margin-left: 20px;
      border-left: 2px solid #e9ecef;
      padding-left: 10px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
<div class="container">
  <h1 class="text-center text-primary mb-4">Dynamic JSON Formatter</h1>
  <div id="json-container"></div>
</div>

<script>
  // Step 1: Simulate the response string
  const responseString = `inside agent request{ "day_duration_minutes": 720, "min_trigger_for_presence": 3, "ack_reference_day": 20050, "macaddress": "0c2a691e9bae", "sleep_on_presence": 3, "reporting_type": 0, "daylight_correction_minutes": 0, "sense_time": 300, "config_last_refreshed": 1732428845, "lastWifi": [ "Freespace_Connect", "78455844a4a1", -61, 11, "192.168.123.93", "192.168.123.254", 0 ], "reference_day": 20051, "day_start_minute_utc": 420, "lastUpdated": 1732428849, "holidays": 0, "wifi": [ "Freespace_Connect", "78455841f768", -48, 6, "192.168.123.92", "192.168.123.254", 0 ], "ack_build_deployed": 67, "build_number": 26, "z_device_data": "BwC1olwCAQsA8OJFtaJcAwEAAwCTGFxAIADoAUYo+4LOTrWiXAIBSgCwC0Vxq1wCAUkAvyhHMVRdAwEAAwBzaGFAIwDggkQonoXOTjFUXQIBSQD/HUcx8l0DAQADADeJYUAfAACDRCiehc5O", "sense_before_declaring": 3, "sleep_till": 0, "install_id": 2019084114, "daylight_correction_day": 60, "ucr": [ [ 0, 5, 7054, { "interface": [ { "bssid": "78455841f768", "type": "wifi", "channel": 6, "macaddress": "0c2a691e9bae", "powered": true, "connectedtoimpserver": true, "powersave": false, "connectedssid": "Freespace_Connect", "rssi": -51, "country": "00005355", "name": "wl0", "bands": "2.4G", "encryption": "WPA2-PSK (AES)", "ssid": "Freespace_Connect" } ], "ipv4": { "server": { "tcptimeout": 20, "port": 31314, "errorpolicy": 1, "tcpwaitfor": 0, "tcpsendfree": 3112, "tcpsendwindow": 4380 }, "netmask": "255.255.255.0", "address": "192.168.123.94", "gateway": "192.168.123.254", "broadcast": "192.168.123.255", "dhcpserver": "192.168.123.254", "dnsserver": [ "192.168.123.254" ] }, "active": 0 } ] ], "sleep_time": 120, "deploymentSHA": 11, "config_fetch_period": 3600, "battery": 3.5239999 }`;

  // Step 2: Extract the JSON content
  const jsonString = responseString.match(/{.*}/)[0]; // Extracts the JSON part from the string
  const jsonData = JSON.parse(jsonString); // Converts JSON string to JavaScript object

  // Step 3: Render JSON dynamically
  function renderJson(data, container) {
    for (const key in data) {
      const value = data[key];
      const wrapper = document.createElement("div");

      if (typeof value === "object" && value !== null) {
        const keyElement = document.createElement("span");
        keyElement.className = "json-key";
        keyElement.textContent = `${key}: `;

        const nestedContainer = document.createElement("div");
        nestedContainer.className = "json-object";
        renderJson(value, nestedContainer);

        wrapper.appendChild(keyElement);
        wrapper.appendChild(nestedContainer);
      } else {
        const keyElement = document.createElement("span");
        keyElement.className = "json-key";
        keyElement.textContent = `${key}: `;

        const valueElement = document.createElement("span");
        valueElement.className = "json-value";
        valueElement.textContent = value;

        wrapper.appendChild(keyElement);
        wrapper.appendChild(valueElement);
      }

      container.appendChild(wrapper);
    }
  }

  const container = document.getElementById("json-container");
  renderJson(jsonData, container);
</script>
</body>
</html>
